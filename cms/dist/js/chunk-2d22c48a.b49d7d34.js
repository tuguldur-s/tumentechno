(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c48a"],{f329:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}}),e("div",{staticClass:"container-fluid mt--7"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"card shadow border-0 p-5"},[e("div",{attrs:{align:"right"}},[e("el-button",{staticClass:"mr-2",attrs:{type:"primary"},on:{click:function(a){t.modals.newCoupon=!0}}},[t._v("Шинэ купон код үүсгэх")]),e("el-select",{attrs:{placeholder:"Select"},on:{change:t.getCoupons},model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"table-responsive mt-2"},[e("base-table",{staticClass:"table align-items-center table-flush thead-light",attrs:{"tbody-classes":"list",data:t.coupon},scopedSlots:t._u([{key:"default",fn:function(a){var o=a.row;return[e("th",{attrs:{scope:"row"}},[e("div",{staticClass:"media align-items-center"},[e("div",{staticClass:"media-body"},[e("span",{staticClass:"name mb-0 text-sm",staticStyle:{color:"#8898aa"}},[t._v(t._s(o.created_at.split("T")[0]))])])])]),e("td",{attrs:{scope:"row"}},[e("div",{staticClass:"media align-items-center"},[e("div",{staticClass:"media-body"},[e("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(o.promo_code))])])])]),e("td",{attrs:{scope:"row"}},[e("div",{staticClass:"media align-items-center"},[e("div",{staticClass:"media-body"},[e("span",{staticClass:"name mb-0 text-sm"},[t._v(t._s(Number(o.amount).toLocaleString())+"₮")])])])]),e("td",{attrs:{scope:"row"}},[e("div",{staticClass:"media align-items-center"},[e("div",{staticClass:"media-body"},[1==o.status?e("span",{staticClass:"name mb-0 text-sm",staticStyle:{color:"#2dce89"}},[t._v("Ашиглагдаагүй")]):e("span",{staticClass:"name mb-0 text-sm",staticStyle:{color:"#f5365c"}},[t._v("Ашиглагдсан")])])])]),e("td",{attrs:{align:"right"}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Устгах",placement:"top"}},[e("base-button",{attrs:{type:"danger",size:"sm"},on:{click:function(a){return t.deleteCoupon(o)}}},[e("span",{staticClass:"ni ni-fat-remove"})])],1)],1)]}}])},[e("template",{slot:"columns"},[e("th",{style:{background:"#F6F9FC"}},[t._v("Үүсгэсэн огноо")]),e("th",{style:{background:"#F6F9FC"}},[t._v("Код")]),e("th",{style:{background:"#F6F9FC"}},[t._v("Дүн")]),e("th",{style:{background:"#F6F9FC"}},[t._v("Төлөв")]),e("th",{style:{background:"#F6F9FC"}})])],2)],1)])])])]),e("modal",{attrs:{show:t.modals.newCoupon},on:{"update:show":function(a){return t.$set(t.modals,"newCoupon",a)}}},[e("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[t._v("Купон код үүсгэх")]),e("div",{staticClass:"row",style:{"max-height":"400px",overflow:"auto"}},[e("div",{staticClass:"col-md-12"},[e("div",{staticStyle:{"margin-top":"15px"}},[e("el-input",{attrs:{placeholder:"Промо код"},model:{value:t.newCoupon.promo,callback:function(a){t.$set(t.newCoupon,"promo",a)},expression:"newCoupon.promo"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:t.processPromo},slot:"append"})],1)],1)]),e("div",{staticClass:"col-md-12 mt-1"},[e("el-input",{attrs:{type:"number",placeholder:"Үнийн дүн",clearable:""},model:{value:t.newCoupon.amount,callback:function(a){t.$set(t.newCoupon,"amount",a)},expression:"newCoupon.amount"}})],1),e("div",{staticClass:"col-md-12 mt-1"},[e("el-input",{attrs:{placeholder:"Утга",maxlength:"50",clearable:""},model:{value:t.newCoupon.value,callback:function(a){t.$set(t.newCoupon,"value",a)},expression:"newCoupon.value"}})],1)]),e("template",{slot:"footer"},[e("base-button",{attrs:{type:"primary"},on:{click:t.addCoupon}},[t._v("Хадгалах")]),e("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:function(a){t.modals.newCoupon=!1}}},[t._v("Гарах ")])],1)],2)],1)},s=[],n=(e("4de4"),e("d3b7"),e("159b"),e("a434"),{data:function(){return{modals:{newCoupon:!1},coupon:[],page:1,pagination:0,filter:3,options:[{value:1,label:"Ашиглаагүй"},{value:0,label:"Ашигласан"},{value:3,label:"Бүгд"}],newCoupon:{promo:"",amount:0,value:""}}},mounted:function(){this.getCoupons()},methods:{addCoupon:function(){var t=this,a=localStorage.getItem("token");t.$axios({method:"POST",url:t.$appUrl+"/api/admin/add-coupon",headers:{Authorization:"Bearer ".concat(a)},data:{promo:this.newCoupon.promo,amount:this.newCoupon.amount,value:this.newCoupon.value,page:this.page,status:this.filter}}).then((function(a){"success"==a.data.result?(t.coupon=a.data.data,t.pagination=a.data.pagination,t.$notify({title:"Амжилттай",message:"Купон бүртгэгдлээ",type:"success"})):t.$notify({title:"Амжилтгүй",message:"Бүртгэлтэй промо код",type:"danger"})}))},processPromo:function(){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",e=16,o=0;o<e;o++)t+=a.charAt(Math.floor(Math.random()*a.length));this.newCoupon.promo=t},deleteCoupon:function(t){if(1==t.status){var a=this,e=localStorage.getItem("token");this.$msgbox({title:"Санамж",message:"Устгахдаа итгэлтэй байна уу",showCancelButton:!0,confirmButtonText:"Тийм",cancelButtonText:"Болих",beforeClose:function(o,s,n){"confirm"===o?(s.confirmButtonLoading=!0,s.confirmButtonText="Түр хүлээнэ үү...",a.$axios({method:"POST",url:a.$appUrl+"/api/admin/delete-coupon",headers:{Authorization:"Bearer ".concat(e)},data:{id:t.id}}).then((function(e){"success"==e.data.result&&(a.$notify({title:"Амжилттай",message:"Купон код устгагдлаа",type:"success"}),a.coupon.forEach((function(e,o){e.id==t.id&&a.coupon.splice(o,1)}))),s.confirmButtonLoading=!1,n()}))):n()}})}else this.$notify({title:"Амжилтгүй",message:"Ашиглагдсан купон код устгах боломжгүй",type:"danger"})},getCoupons:function(){var t=this,a=localStorage.getItem("token");t.$axios({method:"POST",url:t.$appUrl+"/api/admin/get-coupons",headers:{Authorization:"Bearer ".concat(a)},data:{page:this.page,status:this.filter}}).then((function(a){t.coupon=a.data.data,t.pagination=a.data.pagination}))}}}),i=n,l=e("2877"),c=Object(l["a"])(i,o,s,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d22c48a.b49d7d34.js.map